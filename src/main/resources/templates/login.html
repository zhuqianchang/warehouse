<link href="${rc.getContextPath()}/login/login.css" rel="stylesheet" type="text/css">
<script src="${rc.getContextPath()}/js/jquery-2.1.4.min.js" type="text/javascript"></script>
<script src="${rc.getContextPath()}/js/jquery.cookie.js" type="text/javascript"></script>
<div class="main">
    <div class="content">
        <div class="con_right">
            <div class="con_r_top">
                <a href="javascript:;" class="right"
                   style="color: rgb(51, 51, 51); border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(46, 85, 142);">仓库管理系统</a>
            </div>
            <ul>
                <li class="con_r_right" style="display: block;">
                    <form id="form" method="post" action="${rc.getContextPath()}/doLogin" autocomplete="off">
                        <div class="user">
                            <div>
                                <span class="user-icon"></span>
                                <input type="text" name="userCode" placeholder="　输入账号" value="${userCode!''}">
                            </div>
                            <div>
                                <span class="mima-icon"></span>
                                <input type="password" name="password" placeholder="　输入密码" value="${password!''}">
                            </div>
                        </div>
                        <div class="tips">
                            <#if message??>*${message}</#if>
                        </div>
                        <button id="btn_Login" type="button">登 录</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</div>
<script type="text/javascript">

    var $userCode = $("input[name='userCode']");
    var $password = $("input[name='password']");

    //保存账号到cookie
    function saveCookie(){
        var time = {expires: 7};//默认记录7天
        $.cookie('userCode', $userCode.val(), time);
    }

    //cookie中获取数据
    function assignCookie() {
        if ($userCode.val() == $userCode.attr('placeholder') || $.trim($userCode.val()).length == 0) {
            $userCode.val($.cookie('userCode'))
        }
    }

    $(function () {

        assignCookie();

        $(document).keydown(function(event) {
            //回车事件
            if (event.keyCode == 13) {
                $('#btn_Login').click();
            }
        });

        //登录
        $('#btn_Login').click(function () {
            if ($userCode.val() == $userCode.attr('placeholder') || $.trim($userCode.val()).length == 0) {
                $(".tips").html('*账号不能为空');
                return;
            }
            if ($password.val() == $password.attr('placeholder') || $.trim($password.val()).length == 0) {
                $('.tips').html('*密码不能为空');
                return;
            }

            saveCookie();
            $('#form').submit();
        });
    });
</script>